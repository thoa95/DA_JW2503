<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/main}">

<head>
	<title>Chi tiết phòng</title>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

	<style>
		body {
			background-color: #f8fafc;
		}

		.room-hero {
			position: relative;
			height: 400px;
			overflow: hidden;
			border-radius: 12px;
			margin-bottom: 28px;
		}

		.room-hero img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			filter: brightness(0.9);
			border-radius: 12px;
		}

		.info-badge {
			display: inline-block;
			padding: 0.3rem 0.6rem;
			border-radius: 12px;
			font-weight: 600;
			font-size: 0.9rem;
			color: #fff;
		}

		.bed-badge {
			background: linear-gradient(135deg, #4f46e5, #6366f1);
		}

		.area-badge {
			background: linear-gradient(135deg, #16a34a, #22c55e);
		}

		.price-box {
			color: #ff9800;
			font-size: 1.5rem;
			font-weight: 700;
			text-align: center;
		}

		.btn-book {
			background: linear-gradient(90deg, #ffb347, #ffcc33);
			border: none;
			color: #4b2e05;
			font-weight: 600;
			transition: all 0.3s ease;
			width: 100%;
		}

		.btn-book:hover {
			transform: translateY(-2px);
			background: linear-gradient(90deg, #ffa41b, #ffbf00);
			box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
		}

		.amenity-badge {
			display: inline-block;
			padding: 0.25rem 0.6rem;
			border-radius: 12px;
			font-weight: 500;
			font-size: 0.8rem;
			color: #fff;
			background: linear-gradient(135deg, #f97316, #fbbf24);
			margin: 0.25rem;
		}

		.hotel-small-card {
			background: #fff;
			border-radius: 12px;
			padding: 0;
			overflow: hidden;
			box-shadow: 0 3px 8px rgba(0, 0, 0, 0.06);
		}

		.hotel-small-card .hotel-img {
			width: 100%;
			height: 160px;
			object-fit: cover;
		}

		.hotel-small-card .hotel-body {
			padding: 16px;
		}

		.divider {
			height: 1px;
			background-color: #e5e7eb;
			margin: 18px 0;
		}

		/* Form bố cục đẹp */
		.booking-info {
			background: #fff;
			border-radius: 12px;
			padding: 20px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
		}

		.booking-info label {
			font-weight: 600;
		}

		.booking-info input {
			background-color: #e9ecef;
		}

		.action-buttons {
			margin-top: 20px;
		}

		.action-buttons .btn {
			min-width: 160px;
		}
	</style>

	<style>
		@keyframes pulse {
			0% {
				transform: scale(1);
				box-shadow: 0 0 0 rgba(255, 196, 61, 0.4);
			}

			50% {
				transform: scale(1.05);
				box-shadow: 0 0 12px rgba(255, 196, 61, 0.8);
			}

			100% {
				transform: scale(1);
				box-shadow: 0 0 0 rgba(255, 196, 61, 0.4);
			}
		}

		.animate-pulse {
			animation: pulse 1s infinite;
		}
	</style>
</head>

<body>
	<main layout:fragment="content">
		<div class="container py-4">

			<div class="room-hero">
				<img th:src="@{${room.urlImage}}" alt="Phòng" class="rounded-4 shadow-sm">
			</div>

			<div class="row g-4">
				<!-- Thông tin khách sạn -->
				<div class="col-lg-4">
					<div class="hotel-small-card">
						<img th:src="@{'/images/KhachSan/' + ${hotel.id} + '.jpg'}" alt="Hotel" class="hotel-img">
						<div class="hotel-body">
							<h5 class="fw-bold mb-1" th:text="${hotel.name} + ' (' + ${hotel.cityName} + ')'">Tên khách sạn</h5>
							
							<p class="mb-1 small text-muted"><i class="fas fa-map-marker-alt text-danger me-1"></i>
								<span th:text="${hotel.address}">Địa chỉ khách sạn</span>
							</p>
							<p class="mb-1 small text-muted"><i class="fas fa-star text-warning me-1"></i>
								<span th:text="${hotel.evaluate} + ' ★'">5★</span>
							</p>
							<p class="mb-1 small text-muted"><i class="fas fa-phone text-success me-1"></i>
								<span th:text="${hotel.phone}">0123456789</span>
							</p>
							<div class="divider"></div>
							<p class="mb-1"><strong>Loại:</strong> <span th:text="${hotel.typeHotelName}">Resort</span>
							</p>
							<p class="mb-0"><strong>Gần biển:</strong> <span
									th:text="${hotel.nearSea == 1 ? 'Có' : 'Không'}">Không</span></p>

							<a th:href="@{/hotel/{id}(id=${hotel.id})}" class="btn btn-primary w-100 mt-3">
								<i class="fas fa-building me-2"></i>Xem khách sạn
							</a>
							<!-- Nút Thêm giỏ (vẫn ở form) -->

							<button type="button" class="btn btn-book w-100 mt-2 animate-pulse add-to-cart-btn"
								th:data-room-id="${room.id}" th:data-room-name="${room.name}"
								th:data-price="${room.price}" th:data-from-date="${fromDate}"
								th:data-to-date="${toDate}">
								<i class="fas fa-cart-plus me-1"></i>Thêm giỏ
							</button>
						</div>
					</div>
				</div>

				<!-- Thông tin phòng -->
				<div class="col-lg-8">
					<div class="card border-0 bg-transparent">
						<div class="card-body p-0">
							<h3 class="fw-bold mb-2" th:text="${room.name}">Phòng Deluxe View Biển</h3>

							<div class="mb-3">
								<span class="info-badge bed-badge" th:text="${room.bed} + ' giường'">1 giường</span>
								<span class="info-badge area-badge" th:text="${room.area} + ' m²'">30 m²</span>
							</div>

							<p class="text-muted mb-4" th:text="${room.description}">
								Phòng rộng rãi, nội thất hiện đại, view hướng biển tuyệt đẹp.
							</p>

							<h5 class="fw-semibold mb-2"><i class="fa-solid fa-screwdriver-wrench me-2"></i>Tiện nghi
							</h5>
							<div class="mb-4">
								<span class="amenity-badge" th:each="am : ${room.amenities}"
									th:text="${am.name}">Wi-Fi</span>
							</div>

							<div class="divider"></div>

							<!-- Thông tin đặt phòng -->
							<div class="booking-info">
								<div class="price-box mb-3"
									th:text="${#numbers.formatInteger(room.price,0,'COMMA')} + ' VND / đêm'">500,000 VND
									/ đêm</div>

								<div class="mb-3">
									<label for="fromDate">Ngày nhận</label>
									<input type="date" id="fromDate" class="form-control" th:value="${fromDate}"
										disabled>
								</div>

								<div class="mb-3">
									<label for="toDate">Ngày trả</label>
									<input type="date" id="toDate" class="form-control" th:value="${toDate}" disabled>
								</div>



								<!-- Nút Quay lại nằm góc dưới bên phải của content -->
								<div class="d-flex justify-content-end mt-4">
									<a th:href="@{/room/search(cityId=${cityId}, checkIn=${fromDate}, checkOut=${toDate}, bed=${bed}, page=${page})}"
										class="btn btn-secondary">
										<i class="fas fa-arrow-left me-1"></i>Quay lại
									</a>


								</div>

							</div>

						</div>
					</div>
				</div>

			</div>

		</div>
	</main>
</body>

</html>